==25320== Helgrind, a thread error detector
==25320== Copyright (C) 2007-2017, and GNU GPL'd, by OpenWorks LLP et al.
==25320== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==25320== Command: ./broken.out
==25320== Parent PID: 4983
==25320== 
==25320== ---Thread-Announcement------------------------------------------
==25320== 
==25320== Thread #3 was created
==25320==    at 0x4BB3282: clone (clone.S:71)
==25320==    by 0x487A2EB: create_thread (createthread.c:101)
==25320==    by 0x487BE0F: pthread_create@@GLIBC_2.2.5 (pthread_create.c:817)
==25320==    by 0x4842917: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x496C048: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10B5F9: std::thread::thread<void (&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&, std::vector<int, std::allocator<int> >&, int&, int&, int*, void>(void (&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&, std::vector<int, std::allocator<int> >&, int&, int&, int*&&) (thread:130)
==25320==    by 0x10A774: main (broken.cpp:39)
==25320== 
==25320== ---Thread-Announcement------------------------------------------
==25320== 
==25320== Thread #2 was created
==25320==    at 0x4BB3282: clone (clone.S:71)
==25320==    by 0x487A2EB: create_thread (createthread.c:101)
==25320==    by 0x487BE0F: pthread_create@@GLIBC_2.2.5 (pthread_create.c:817)
==25320==    by 0x4842917: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x496C048: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10B5F9: std::thread::thread<void (&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&, std::vector<int, std::allocator<int> >&, int&, int&, int*, void>(void (&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&, std::vector<int, std::allocator<int> >&, int&, int&, int*&&) (thread:130)
==25320==    by 0x10A774: main (broken.cpp:39)
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 8 at 0x114058 by thread #3
==25320== Locks held: none
==25320==    at 0x49C88B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 8 by thread #2
==25320== Locks held: none
==25320==    at 0x49C8965: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==  Address 0x114058 is 24 bytes inside data symbol "_ZSt4cout@@GLIBCXX_3.4"
==25320== 
==25320== ---Thread-Announcement------------------------------------------
==25320== 
==25320== Thread #4 was created
==25320==    at 0x4BB3282: clone (clone.S:71)
==25320==    by 0x487A2EB: create_thread (createthread.c:101)
==25320==    by 0x487BE0F: pthread_create@@GLIBC_2.2.5 (pthread_create.c:817)
==25320==    by 0x4842917: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x496C048: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10B5F9: std::thread::thread<void (&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&, std::vector<int, std::allocator<int> >&, int&, int&, int*, void>(void (&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&, std::vector<int, std::allocator<int> >&, int&, int&, int*&&) (thread:130)
==25320==    by 0x10A774: main (broken.cpp:39)
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during write of size 1 at 0x4DFD837 by thread #4
==25320== Locks held: none
==25320==    at 0x48488A6: mempcpy (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x4B237B1: _IO_new_file_xsputn (fileops.c:1236)
==25320==    by 0x4B237B1: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1197)
==25320==    by 0x4B17540: fwrite (iofwrite.c:39)
==25320==    by 0x49C89B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==  Address 0x4dfd837 is 7 bytes inside a block of size 1,024 alloc'd
==25320==    at 0x483C893: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x4B15E83: _IO_file_doallocate (filedoalloc.c:101)
==25320==    by 0x4B2604F: _IO_doallocbuf (genops.c:347)
==25320==    by 0x4B250AF: _IO_file_overflow@@GLIBC_2.2.5 (fileops.c:745)
==25320==    by 0x4B23834: _IO_new_file_xsputn (fileops.c:1244)
==25320==    by 0x4B23834: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1197)
==25320==    by 0x4B17540: fwrite (iofwrite.c:39)
==25320==    by 0x49C89B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==  Block was alloc'd by thread #2
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during write of size 8 at 0x114058 by thread #4
==25320== Locks held: none
==25320==    at 0x49C8965: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous read of size 8 by thread #3
==25320== Locks held: none
==25320==    at 0x49C88B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==  Address 0x114058 is 24 bytes inside data symbol "_ZSt4cout@@GLIBCXX_3.4"
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 1 at 0x114129 by thread #4
==25320== Locks held: none
==25320==    at 0x49C8EA7: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 1 by thread #2
==25320== Locks held: none
==25320==    at 0x49C8F4E: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==  Address 0x114129 is 233 bytes inside data symbol "_ZSt4cout@@GLIBCXX_3.4"
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 1 at 0x114128 by thread #4
==25320== Locks held: none
==25320==    at 0x49C8EB1: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 1 by thread #2
==25320== Locks held: none
==25320==    at 0x49C8F43: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==  Address 0x114128 is 232 bytes inside data symbol "_ZSt4cout@@GLIBCXX_3.4"
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during write of size 1 at 0x4DFD838 by thread #4
==25320== Locks held: none
==25320==    at 0x48488CC: mempcpy (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x4B237B1: _IO_new_file_xsputn (fileops.c:1236)
==25320==    by 0x4B237B1: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1197)
==25320==    by 0x4B17540: fwrite (iofwrite.c:39)
==25320==    by 0x49BA207: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8ED9: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==  Address 0x4dfd838 is 8 bytes inside a block of size 1,024 alloc'd
==25320==    at 0x483C893: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x4B15E83: _IO_file_doallocate (filedoalloc.c:101)
==25320==    by 0x4B2604F: _IO_doallocbuf (genops.c:347)
==25320==    by 0x4B250AF: _IO_file_overflow@@GLIBC_2.2.5 (fileops.c:745)
==25320==    by 0x4B23834: _IO_new_file_xsputn (fileops.c:1244)
==25320==    by 0x4B23834: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1197)
==25320==    by 0x4B17540: fwrite (iofwrite.c:39)
==25320==    by 0x49C89B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==  Block was alloc'd by thread #2
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 1 at 0x4A74738 by thread #4
==25320== Locks held: none
==25320==    at 0x49C868F: std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A47B: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 1 by thread #2
==25320== Locks held: none
==25320==    at 0x4967690: std::ctype<char>::_M_widen_init() const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8F6F: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==  Address 0x4a74738 is in the BSS segment of /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 1 at 0x4A74743 by thread #4
==25320== Locks held: none
==25320==    at 0x49C869A: std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A47B: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 2 by thread #2
==25320== Locks held: none
==25320==    at 0x49675DB: std::ctype<char>::_M_widen_init() const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8F6F: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==  Address 0x4a74743 is in the BSS segment of /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 4 at 0x1FFEFFF968 by thread #3
==25320== Locks held: none
==25320==    at 0x10A4CB: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:16)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 4 by thread #2
==25320== Locks held: none
==25320==    at 0x10A4D3: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:16)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==  Address 0x1ffefff968 is on thread #1's stack
==25320==  in frame #4, created by main (broken.cpp:23)
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during write of size 4 at 0x1FFEFFF968 by thread #3
==25320== Locks held: none
==25320==    at 0x10A4D3: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:16)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 4 by thread #2
==25320== Locks held: none
==25320==    at 0x10A4D3: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:16)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==  Address 0x1ffefff968 is on thread #1's stack
==25320==  in frame #4, created by main (broken.cpp:23)
==25320== 
==25320== ---Thread-Announcement------------------------------------------
==25320== 
==25320== Thread #10 was created
==25320==    at 0x4BB3282: clone (clone.S:71)
==25320==    by 0x487A2EB: create_thread (createthread.c:101)
==25320==    by 0x487BE0F: pthread_create@@GLIBC_2.2.5 (pthread_create.c:817)
==25320==    by 0x4842917: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x496C048: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10B5F9: std::thread::thread<void (&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&, std::vector<int, std::allocator<int> >&, int&, int&, int*, void>(void (&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&, std::vector<int, std::allocator<int> >&, int&, int&, int*&&) (thread:130)
==25320==    by 0x10A774: main (broken.cpp:39)
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 8 at 0x114058 by thread #3
==25320== Locks held: none
==25320==    at 0x49C88B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A4ED: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:19)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 8 by thread #10
==25320== Locks held: none
==25320==    at 0x49C8965: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==  Address 0x114058 is 24 bytes inside data symbol "_ZSt4cout@@GLIBCXX_3.4"
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during write of size 8 at 0x114058 by thread #3
==25320== Locks held: none
==25320==    at 0x49C8965: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A4ED: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:19)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 8 by thread #10
==25320== Locks held: none
==25320==    at 0x49C8965: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8D5B: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A447: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==  Address 0x114058 is 24 bytes inside data symbol "_ZSt4cout@@GLIBCXX_3.4"
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 1 at 0x114129 by thread #3
==25320== Locks held: none
==25320==    at 0x49C8EA7: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A4FD: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:19)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 1 by thread #2
==25320== Locks held: none
==25320==    at 0x49C8F4E: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==  Address 0x114129 is 233 bytes inside data symbol "_ZSt4cout@@GLIBCXX_3.4"
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 1 at 0x114128 by thread #3
==25320== Locks held: none
==25320==    at 0x49C8EB1: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A4FD: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:19)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 1 by thread #2
==25320== Locks held: none
==25320==    at 0x49C8F43: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==  Address 0x114128 is 232 bytes inside data symbol "_ZSt4cout@@GLIBCXX_3.4"
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 1 at 0x4A74738 by thread #3
==25320== Locks held: none
==25320==    at 0x49C868F: std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A521: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:19)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 1 by thread #2
==25320== Locks held: none
==25320==    at 0x4967690: std::ctype<char>::_M_widen_init() const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8F6F: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==  Address 0x4a74738 is in the BSS segment of /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28
==25320== 
==25320== ----------------------------------------------------------------
==25320== 
==25320== Possible data race during read of size 1 at 0x4A74743 by thread #3
==25320== Locks held: none
==25320==    at 0x49C869A: std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A521: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:19)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==    by 0x496BD83: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==25320==    by 0x487B608: start_thread (pthread_create.c:477)
==25320==    by 0x4BB3292: clone (clone.S:95)
==25320== 
==25320== This conflicts with a previous write of size 2 by thread #2
==25320== Locks held: none
==25320==    at 0x49675DB: std::ctype<char>::_M_widen_init() const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x49C8F6F: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==25320==    by 0x10A457: vsum(int, std::vector<int, std::allocator<int> > const&, int, int, int*) (broken.cpp:11)
==25320==    by 0x10EAEE: void std::__invoke_impl<void, void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(std::__invoke_other, void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:60)
==25320==    by 0x10E94D: std::__invoke_result<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>::type std::__invoke<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*>(void (*&&)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int&&, std::vector<int, std::allocator<int> >&&, int&&, int&&, int*&&) (invoke.h:95)
==25320==    by 0x10E7AC: void std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) (thread:244)
==25320==    by 0x10E6F3: std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> >::operator()() (thread:251)
==25320==    by 0x10E6D3: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(int, std::vector<int, std::allocator<int> > const&, int, int, int*), int, std::vector<int, std::allocator<int> >, int, int, int*> > >::_M_run() (thread:195)
==25320==  Address 0x4a74743 is in the BSS segment of /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28
==25320== 
==25320== 
==25320== Use --history-level=approx or =none to gain increased speed, at
==25320== the cost of reduced accuracy of conflicting-access information
==25320== For lists of detected and suppressed errors, rerun with: -s
==25320== ERROR SUMMARY: 20419 errors from 16 contexts (suppressed: 664 from 73)
